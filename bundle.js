!function(e){function t(t){for(var o,s,a=t[0],c=t[1],u=t[2],d=0,h=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(l&&l(t);h.length;)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={0:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([60,1]),n()}({20:function(e,t){e.exports='<!doctype html> <html lang=en> <head> <meta charset=UTF-8 /> <meta name=viewport content="width=device-width,initial-scale=1"/> <link rel="shortcut icon" href=""/> <title>360 Viewer</title> </head> <body> <div class=info></div> <div class=app></div> </body> </html> '},21:function(e,t,n){var o=n(22),r=n(23);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},23:function(e,t,n){(t=n(24)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200&display=swap);"]),t.push([e.i,'body {\n  font-family: "Montserrat", sans-serif;\n  font-size: 1.25em;\n  overflow: hidden;\n}\n\n.info {\n  width: 100%;\n  z-index: 9;\n  position: absolute;\n  bottom: 4em;\n  text-align: center;\n}\n\n.app {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\na {\n  color: hotpink;\n}\n',""]),e.exports=t},39:function(e,t){},58:function(e,t){e.exports="assets/images/photo1.jpg"},59:function(e,t){e.exports="assets/images/photo2.jpg"},60:function(e,t,n){"use strict";n.r(t);n(20),n(21);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=function(){function e(t){o(this,e),this.name=t,this.callbacks=[]}return i(e,[{key:"registerCallback",value:function(e){this.callbacks.push(e)}}]),e}(),a=function(){function e(){o(this,e),this.events={}}return i(e,[{key:"registerEvent",value:function(e){var t=new s(e);this.events[e]=t}},{key:"dispatchEvent",value:function(e,t){this.events[e].callbacks.forEach((function(e){e(t)}))}},{key:"addEventListener",value:function(e,t){this.events[e].registerCallback(t)}}]),e}(),c=new(function(){function e(){o(this,e),this.globals={},this.isPrimary=!0,this.isXRSession=!1,this.isPaused=!1,this.currentSession=null,this.debugMode=!1,this.eventHandler=new a,this.eventHandler.registerEvent("xrsessionstarted"),this.eventHandler.registerEvent("xrsessionended"),this.eventHandler.registerEvent("inputsourceschange"),this.eventHandler.registerEvent("selectend"),this.eventHandler.registerEvent("selectstart"),this.eventHandler.registerEvent("select"),this.eventHandler.registerEvent("squeezeend"),this.eventHandler.registerEvent("squeezestart"),this.eventHandler.registerEvent("squeeze"),this.eventHandler.registerEvent("peerconnected"),this.eventHandler.registerEvent("peerdisconnected"),this.bindKeys()}return i(e,[{key:"bindKeys",value:function(){var e=this;document.addEventListener("keydown",(function(t){if(t.shiftKey)switch(t.keyCode){case 192:e.debugMode=!e.debugMode,console.log("Debug: "+e.debugMode);break;case 80:e.isPaused=!e.isPaused,console.log("Paused: "+e.isPaused)}}))}}]),e}()),u=n(0);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,o,r=p(i);function i(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,n)).camera=e,o.domElement=t,o.PI_2=Math.PI/2,o.euler=new u.o(0,0,0,"YXZ"),o.vec=new u.ub,o.cameraForward=new u.ub,o._rcPressed=!1,o.pressedKeyMap={87:!1,65:!1,83:!1,68:!1,81:!1,69:!1,16:!1},window.addEventListener("keydown",o.onKeyDown.bind(y(o)),!1),window.addEventListener("keyup",o.onKeyUp.bind(y(o)),!1),window.addEventListener("mousedown",o.onMouseDown.bind(y(o)),!1),window.addEventListener("mouseup",o.onMouseUp.bind(y(o)),!1),window.addEventListener("mousemove",o.onMouseMove.bind(y(o)),!1),window.addEventListener("wheel",o.onMouseWheel.bind(y(o)),!1),document.oncontextmenu=function(e){null!=e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()},o.retrieveSessionData(),o}return t=i,(n=[{key:"setSessionData",value:function(){this.editorCamState={camSpeed:this.CAM_SPEED,cameraPosition:this.camera.position,cameraQuaternion:this.camera.quaternion},window.sessionStorage.setItem("camState",JSON.stringify(this.editorCamState))}},{key:"retrieveSessionData",value:function(){var e=JSON.parse(window.sessionStorage.getItem("camState"));if(null==e)return this.CAM_SPEED=.015,void this.setSessionData();this.CAM_SPEED="camSpeed"in e?e.camSpeed:.015,this.camera.position.copy("cameraPosition"in e?e.cameraPosition:new u.ub),this.camera.applyQuaternion("cameraQuaternion"in e?e.cameraQuaternion:new u.ub)}},{key:"Update",value:function(){this.shiftSpeedMulti=this.pressedKeyMap[16]?2:1,this.pressedKeyMap[87]&&this.moveForward(this.CAM_SPEED*this.shiftSpeedMulti),this.pressedKeyMap[83]&&this.moveForward(-this.CAM_SPEED*this.shiftSpeedMulti),this.pressedKeyMap[69]&&this.moveUp(this.CAM_SPEED*this.shiftSpeedMulti),this.pressedKeyMap[81]&&this.moveUp(-this.CAM_SPEED*this.shiftSpeedMulti),this.pressedKeyMap[68]&&this.moveRight(this.CAM_SPEED*this.shiftSpeedMulti),this.pressedKeyMap[65]&&this.moveRight(-this.CAM_SPEED*this.shiftSpeedMulti)}},{key:"onKeyDown",value:function(e){this.pressedKeyMap[e.keyCode]=e.keyCode in this.pressedKeyMap}},{key:"onKeyUp",value:function(e){this.pressedKeyMap[e.keyCode]=!(e.keyCode in this.pressedKeyMap)}},{key:"onMouseDown",value:function(e){2==e.button&&(this._rcPressed=!0,this.domElement.requestPointerLock=this.domElement.requestPointerLock||domElement.mozRequestPointerLock,this.domElement.requestPointerLock())}},{key:"onMouseUp",value:function(e){2==e.button&&(this._rcPressed=!1,document.exitPointerLock(),this.setSessionData())}},{key:"moveForward",value:function(e){this.camera.getWorldDirection(this.cameraForward),this.camera.position.addScaledVector(this.cameraForward,e)}},{key:"moveRight",value:function(e){this.vec.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(this.vec,e)}},{key:"moveUp",value:function(e){this.camera.position.addScaledVector(this.camera.up,e)}},{key:"onMouseMove",value:function(e){if(this._rcPressed){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;this.euler.setFromQuaternion(this.camera.quaternion),this.euler.y-=.002*t,this.euler.x-=.002*n,this.euler.x=Math.max(-this.PI_2,Math.min(this.PI_2,this.euler.x)),this.camera.quaternion.setFromEuler(this.euler)}}},{key:"onMouseWheel",value:function(e){this._rcPressed?this.CAM_SPEED=Math.max(.01,this.CAM_SPEED-=1e-4*e.deltaY):this.moveForward(this.CAM_SPEED*-e.deltaY/10)}}])&&d(t.prototype,n),o&&d(t,o),i}(u.V),g=new u.wb({antialias:!0,alpha:!0});g.setPixelRatio(window.devicePixelRatio),g.setSize(window.innerWidth,window.innerHeight),g.setClearColor(0,0),g.sortObjects=!1,g.physicallyCorrectLights=!0,g.xr.enabled=!0;var m=g;function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;if(this.renderer=m,this.showEnterVR=this.showEnterVR.bind(this),"xr"in navigator)return navigator.xr.addEventListener("sessiongranted",(function(e){navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then((function(e){t.onSessionStarted(e)}))})),this.button=document.createElement("this.button"),this.button.style.display="none",this.stylizeElement(this.button),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?t.showEnterVR():t.showWebXRNotFound()})),this.button;var n=document.createElement("a");return!1===window.isSecureContext?(n.href=document.location.href.replace(/^http:/,"https:"),n.innerHTML="WEBXR NEEDS HTTPS"):(n.href="https://immersiveweb.dev/",n.innerHTML="WEBXR NOT AVAILABLE"),n.style.left="calc(50% - 90px)",n.style.width="180px",n.style.textDecoration="none",this.stylizeElement(n),n}var t,n,o;return t=e,(n=[{key:"onSessionStarted",value:function(e){e.addEventListener("end",this.onSessionEnded.bind(this)),this.renderer.xr.setSession(e),e.addEventListener("inputsourceschange",this.onInputSourcesChange),c.debugMode&&console.warn("xr session started"),c.eventHandler.dispatchEvent("xrsessionstarted",e),this.button.textContent="EXIT VR",c.isXRSession=!0,c.currentSession=e}},{key:"onSessionEnded",value:function(){c.debugMode&&console.warn("xr session ended"),c.currentSession.removeEventListener("end",this.onSessionEnded),c.eventHandler.dispatchEvent("xrsessionended"),this.button.textContent="ENTER VR",c.isXRSession=!1,c.currentSession=null}},{key:"onInputSourcesChange",value:function(e){c.debugMode&&console.log("input sources change"),c.eventHandler.dispatchEvent("inputsourceschange",e)}},{key:"showEnterVR",value:function(){var e=this;this.button.style.display="",this.button.style.cursor="pointer",this.button.style.left="calc(50% - 50px)",this.button.style.width="100px",this.button.style.background="black",this.button.textContent="ENTER VR",this.button.onmouseenter=function(){e.button.style.opacity="1.0"},this.button.onmouseleave=function(){e.button.style.opacity="0.5"},this.button.onclick=function(){null===c.currentSession?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(e.onSessionStarted.bind(e)):c.currentSession.end()}}},{key:"disableButton",value:function(){this.button.style.display="",this.button.style.cursor="auto",this.button.style.left="calc(50% - 75px)",this.button.style.width="150px",this.button.onmouseenter=null,this.button.onmouseleave=null,this.button.onclick=null}},{key:"showWebXRNotFound",value:function(){this.disableButton(),this.button.textContent="VR NOT SUPPORTED"}},{key:"stylizeElement",value:function(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}}])&&w(t.prototype,n),o&&w(t,o),e}(),E=n(1);function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var M=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=o||{},this.scene=t,this.world=n,this._meshes=[],this._material=new u.N({color:65280,wireframe:!0}),this._sphereGeometry=new u.nb(1),this._boxGeometry=new u.f(1,1,1),this._planeGeometry=new u.Y(10,10,10,10),this._cylinderGeometry=new u.l(1,1,10,10),this.tmpVec0=new E.Vec3,this.tmpVec1=new E.Vec3,this.tmpVec2=new E.Vec3,this.tmpQuat0=new E.Vec3}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=this;if(e){for(var n=this.world.bodies,o=this._meshes,r=this.tmpVec0,i=this.tmpQuat0,s=0,a=0;a!==n.length;a++)for(var c=n[a],u=0;u!==c.shapes.length;u++){var l=c.shapes[u];this._updateMesh(s,c,l),(d=o[s])&&(c.quaternion.vmult(c.shapeOffsets[u],r),c.position.vadd(r,r),c.quaternion.mult(c.shapeOrientations[u],i),d.position.copy(r),d.quaternion.copy(i)),s++}for(a=s;a<o.length;a++){var d;(d=o[a])&&this.scene.remove(d)}o.length=s}else this._meshes.length>0&&(this._meshes.forEach((function(e){t.scene.remove(e)})),this._meshes.length=0)}},{key:"_updateMesh",value:function(e,t,n){var o=this._meshes[e];this._typeMatch(o,n)||(o&&this.scene.remove(o),o=this._meshes[e]=this._createMesh(n)),this._scaleMesh(o,n)}},{key:"_typeMatch",value:function(e,t){if(!e)return!1;var n=e.geometry;return n instanceof u.nb&&t instanceof E.Sphere||n instanceof u.f&&t instanceof E.Box||n instanceof u.Y&&t instanceof E.Plane||n.id===t.geometryId&&t instanceof E.ConvexPolyhedron||n.id===t.geometryId&&t instanceof E.Trimesh||n.id===t.geometryId&&t instanceof E.Heightfield}},{key:"_createMesh",value:function(e){var t,n=this._material;switch(e.type){case E.Shape.types.SPHERE:t=new u.M(this._sphereGeometry,n);break;case E.Shape.types.BOX:t=new u.M(this._boxGeometry,n);break;case E.Shape.types.PLANE:t=new u.M(this._planeGeometry,n);break;case E.Shape.types.CONVEXPOLYHEDRON:for(var o=new u.s,r=0;r<e.vertices.length;r++){var i=e.vertices[r];o.vertices.push(new u.ub(i.x,i.y,i.z))}for(r=0;r<e.faces.length;r++)for(var s=e.faces[r],a=s[0],c=1;c<s.length-1;c++){var l=s[c],d=s[c+1];o.faces.push(new u.p(a,l,d))}o.computeBoundingSphere(),o.computeFaceNormals(),t=new u.M(o,n),e.geometryId=o.id;break;case E.Shape.types.TRIMESH:var h=new u.s,p=this.tmpVec0,f=this.tmpVec1,y=this.tmpVec2;for(r=0;r<e.indices.length/3;r++)e.getTriangleVertices(r,p,f,y),h.vertices.push(new u.ub(p.x,p.y,p.z),new u.ub(f.x,f.y,f.z),new u.ub(y.x,y.y,y.z)),c=h.vertices.length-3,h.faces.push(new u.p(c,c+1,c+2));h.computeBoundingSphere(),h.computeFaceNormals(),t=new u.M(h,n),e.geometryId=h.id;break;case E.Shape.types.HEIGHTFIELD:h=new u.s,p=this.tmpVec0,f=this.tmpVec1,y=this.tmpVec2;for(var v=0;v<e.data.length-1;v++)for(var b=0;b<e.data[v].length-1;b++)for(var g=0;g<2;g++)e.getConvexTrianglePillar(v,b,0===g),p.copy(e.pillarConvex.vertices[0]),f.copy(e.pillarConvex.vertices[1]),y.copy(e.pillarConvex.vertices[2]),p.vadd(e.pillarOffset,p),f.vadd(e.pillarOffset,f),y.vadd(e.pillarOffset,y),h.vertices.push(new u.ub(p.x,p.y,p.z),new u.ub(f.x,f.y,f.z),new u.ub(y.x,y.y,y.z)),r=h.vertices.length-3,h.faces.push(new u.p(r,r+1,r+2));h.computeBoundingSphere(),h.computeFaceNormals(),t=new u.M(h,n),e.geometryId=h.id}return t&&this.scene.add(t),t}},{key:"_scaleMesh",value:function(e,t){switch(t.type){case E.Shape.types.SPHERE:var n=t.radius;e.scale.set(n,n,n);break;case E.Shape.types.BOX:e.scale.copy(t.halfExtents),e.scale.multiplyScalar(2);break;case E.Shape.types.CONVEXPOLYHEDRON:e.scale.set(1,1,1);break;case E.Shape.types.TRIMESH:e.scale.copy(t.scale);break;case E.Shape.types.HEIGHTFIELD:e.scale.set(1,1,1)}}}])&&x(t.prototype,n),o&&x(t,o),e}(),k=n(19);function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var C=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controllerGrips=[],this.inputSources=null,this.controllerModelFactory=new k.a}var t,n,o;return t=e,(n=[{key:"onSelectStart",value:function(e){c.debugMode&&(console.log("select started!"),console.log(e)),c.eventHandler.dispatchEvent("selectstart",e)}},{key:"onSelectEnd",value:function(e){c.debugMode&&(console.log("select ended!"),console.log(e)),c.eventHandler.dispatchEvent("selectend",e)}},{key:"onSelect",value:function(e){c.debugMode&&(console.log("select event!"),console.log(e)),c.eventHandler.dispatchEvent("select",e)}},{key:"onSqueezeStart",value:function(e){c.debugMode&&(console.log("squeeze pressed!"),console.log(e)),c.eventHandler.dispatchEvent("squeezestart",e)}},{key:"onSqueezeEnd",value:function(e){c.debugMode&&(console.log("squeeze released!"),console.log(e)),c.eventHandler.dispatchEvent("squeezeend",e)}},{key:"onSqueeze",value:function(e){c.debugMode&&(console.log("squeeze event!"),console.log(e)),c.eventHandler.dispatchEvent("squeeze",e)}},{key:"onConnected",value:function(e){c.debugMode&&(console.log("Controller Connected"),console.log(e.data))}},{key:"onDisconnected",value:function(e){c.debugMode&&(console.log("Controller Disconnected"),console.log(e.data))}},{key:"CreateControllerModel",value:function(e,t){e.add(this.controllerModelFactory.createControllerModel(e)),t.add(e)}},{key:"Update",value:function(){c.debugMode&&this.debugOutput()}},{key:"debugOutput",value:function(){var e=this;if(null!=this.inputSources)return this.inputDebugString="",this.inputSources.forEach((function(t){null!=t.gamepad&&(t.gamepad.buttons.forEach((function(n,o){1==n.pressed&&(e.inputDebugString+=t.handedness+" controller button "+o+"\n",e.inputDebugString+="value: "+n.value+"\n")})),t.gamepad.axes.forEach((function(n,o){0!=n&&(e.inputDebugString+=t.handedness+" joystick:\n",e.inputDebugString+=o%2==0?"x: "+n+"\n":"y: "+n+"\n")})))})),""==this.inputDebugString?0:console.log(this.inputDebugString)}}])&&P(t.prototype,n),o&&P(t,o),e}());c.eventHandler.addEventListener("xrsessionstarted",(function(e){e.addEventListener("selectend",C.onSelectEnd.bind(C)),e.addEventListener("selectstart",C.onSelectStart.bind(C)),e.addEventListener("select",C.onSelect.bind(C)),e.addEventListener("squeezestart",C.onSqueezeStart.bind(C)),e.addEventListener("squeezeend",C.onSqueezeEnd.bind(C)),e.addEventListener("squeeze",C.onSqueeze.bind(C)),e.addEventListener("connected",C.onConnected.bind(C)),e.addEventListener("disconnected",C.onDisconnected.bind(C))})),c.eventHandler.addEventListener("inputsourceschange",(function(e){C.controllerGrips=[],C.inputSources=e.session.inputSources;for(var t=-1!==navigator.userAgent.indexOf("Mchr"),n=t?2:C.inputSources.length,o=0;o<n;o++)(t||null!=C.inputSources[o].gripSpace)&&(c.debugMode&&console.log("adding controller grip "+o),C.controllerGrips[o]=m.xr.getControllerGrip(o))})),c.eventHandler.addEventListener("xrsessionended",(function(){C.controllerGrips=[],C.inputSources=null}));var _=C,O=void 0,R={rigidbodies:new Array,controllerRigidbodies:new Array,RigidBodyShape:{Box:1,Sphere:2,Plane:3,Cylinder:4},Body:E.Body};R.cannonWorld=new E.World,R.cannonWorld.broadphase=new E.NaiveBroadphase,R.cannonWorld.gravity.set(0,-9.81,0),R.cannonWorld.solver.iterations=50,R.cannonWorld.solver.tolerance=0,c.debugMode&&console.log("CannonJS world created"),R.addControllerRigidBody=function(e){var t=new E.Body({mass:0,type:E.Body.KINEMATIC});t.name="Controller "+R.controllerRigidbodies.length+" RigidBody",t.collisionResponse=1,t.addShape(new E.Sphere(.075)),R.cannonWorld.add(t),R.controllerRigidbodies.push(t),R.rigidbodies.push(t),c.debugMode&&console.log(t.name+" created")},R.enableDebugger=function(e){R.debugRenderer=new M(e,R.cannonWorld)},R.updateControllers=function(){null!=_.controllerGrips&&0!=_.controllerGrips.length&&0!=R.controllerRigidbodies.length&&_.controllerGrips.forEach((function(e,t){R.controllerRigidbodies[t].position.copy(_.controllerGrips[t].position),R.controllerRigidbodies[t].quaternion.copy(_.controllerGrips[t].quaternion)}))},R.Update=function(){R.rigidbodies.length<1||(R.cannonWorld.step(1/120),R.updateControllers(),R.cannonWorld.bodies.forEach((function(e,t){R.cannonWorld.bodies[t].type!=E.Body.KINEMATIC&&(R.rigidbodies[t].quaternion.copy(e.quaternion),R.rigidbodies[t].position.copy(e.position))})),null!=R.debugRenderer&&R.debugRenderer.update(c.debugMode))},R.resetScene=function(){for(var e=R.cannonWorld.bodies,t=e.length;t--;)O.removeBody(e[t])},R.addRigidBody=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.Body.DYNAMIC,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(null!=e.geometry){e.geometry.computeBoundingBox();var r,i=new u.ub;switch(e.geometry.boundingBox.getSize(i),i.divideScalar(2),t){case R.RigidBodyShape.Box:r=new E.Box(new E.Vec3(i.x,i.y,i.z));break;case R.RigidBodyShape.Sphere:r=new E.Sphere(Math.max(i.x,i.y,i.z));break;case R.RigidBodyShape.Plane:r=new E.Plane;break;case R.RigidBodyShape.Cylinder:var s=Math.min(i.x,i.y,i.z),a=2*Math.max(i.x,i.y,i.z);r=new E.Cylinder(s,s,a,16);break;default:console.error("Physics.addBody: No matching rigidbody found! See Physics.RigidBody object for options")}var l=new E.Body({mass:o,type:n,allowSleep:!0,sleepSpeedLimit:1});return l.addShape(r),l.position.copy(e.position),l.quaternion.copy(e.quaternion),R.cannonWorld.addBody(l),l.addEventListener("collide",(function(e){c.debugMode&&console.log("body collided")})),R.rigidbodies.push(e),l}c.debugMode&&console.warn("no mesh geometry found for "+e.type+", aborting rigibdoy creation")},R.resetRigidbody=function(e){e.position.setZero(),e.previousPosition.setZero(),e.interpolatedPosition.setZero(),e.initPosition.setZero(),e.quaternion.set(0,0,0,1),e.initQuaternion.set(0,0,0,1),e.velocity.setZero(),e.initVelocity.setZero(),e.angularVelocity.setZero(),e.initAngularVelocity.setZero(),e.force.setZero(),e.torque.setZero(),e.sleepState=0,e.timeLastSleepy=0,e._wakeUpAfterNarrowphase=!1};var D=R,L=new u.X(75,window.innerWidth/window.innerHeight,.1,1e4),z=function(e){e.add(new b(L,m.domElement)),L.audioListener=new u.c,L.add(L.audioListener),e.add(L),m.setAnimationLoop((function(){m.render(e,L),c.isXRSession&&_.Update(),c.isPaused||D.Update(),e.traverse((function(e){"function"==typeof e.Update&&e.Update()}))})),document.querySelector(".app").appendChild(m.domElement),document.querySelector(".app").appendChild(new S),window.addEventListener("resize",(function(){L.aspect=window.innerWidth/window.innerHeight,L.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}))},H=n(3);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=N(e);if(t){var r=N(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,o,r=T(i);function i(){return q(this,i),r.apply(this,arguments)}return t=i,o=[{key:"types",value:function(){return{Color:u.k}}}],(n=[{key:"init",value:function(){this.subscribe("viewer","remoteselectphoto",this.SelectPhoto)}},{key:"SelectPhoto",value:function(e){this.publish("viewer","selectphoto",e)}}])&&B(t.prototype,n),o&&B(t,o),i}(H.Model);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=X(e);if(t){var r=X(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=n(58),Z=n(59),Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(i,e);var t,n,o,r=G(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).scene=new u.ib,t.scene.add(new u.a(16777215,4)),z(t.scene),t.loader=new u.qb,t.photos=[t.loader.load(Y),t.loader.load(Z)],t.orbRadius=.15,t.subscribe("viewer","selectphoto",t.LoadPhoto),t.currentPhoto=0,t.isSelecting=!1;var n=new u.V;return n.Update=function(){_.inputSources&&_.inputSources.forEach((function(e){e.gamepad&&(e.gamepad.buttons.forEach((function(n,o){!0===n.pressed&&!1===t.isSelecting&&(t.pressedButton=n,t.isSelecting=!0,t.HandlePhotoSelection(e,n))})),t.pressedButton&&!1===t.pressedButton.pressed&&!0===t.isSelecting&&(t.isSelecting=!1))}))},t.scene.add(n),t.primaryController=m.xr.getController(1),t.scene.add(t.primaryController),t.CreateSkybox(),t.CreateSelectionOrb(),t}return t=i,(n=[{key:"HandlePhotoSelection",value:function(e,t){var n=this;_.inputSources.forEach((function(t,o){e.handedness===t.handedness&&(n.primaryIndex=o)})),this.primaryController=m.xr.getController(this.primaryIndex),this.SphereDistanceTest(this.primaryController.position,this.orbRadius)&&this.CyclePhoto()}},{key:"SphereDistanceTest",value:function(e,t){if(this.selectionOrb){var n=new u.ub(e.x,e.y,e.z),o=new u.ub;this.selectionOrb.getWorldPosition(o);var r=n.sub(o);return r.x*r.x+r.y*r.y+r.z*r.z<Math.pow(t,2)}}},{key:"LoadPhoto",value:function(e){this.currentPhoto=e.photoIndex}},{key:"CreateSkybox",value:function(){var e=new u.mb(5216,180,180);e.scale(-1,1,1);var t=this.photos[this.currentPhoto];this.skyboxMaterial=new u.N({map:t,precision:"highp"}),this.skybox=new u.M(e,this.skyboxMaterial),this.scene.add(this.skybox)}},{key:"CreateSelectionOrb",value:function(){var e=this.photos[this.NextPhoto()],t=new u.nb(this.orbRadius,20,20);t.scale(-1,1,1);var n=new u.N({color:16777215,map:e}),o=new u.M(t,n);o.position.setY(1.2),o.position.setZ(-1),this.selectionOrb=o,this.scene.add(this.selectionOrb)}},{key:"CyclePhoto",value:function(){this.currentPhoto=this.NextPhoto(),this.skybox.material.map=this.photos[this.currentPhoto],this.selectionOrb.material.map=this.photos[this.NextPhoto()]}},{key:"NextPhoto",value:function(){return(this.currentPhoto+1)%this.photos.length}}])&&F(t.prototype,n),o&&F(t,o),i}(H.View);new function(){A.register(),H.Session.join("jrsdgjuzkawaawi",A,Q)}}});